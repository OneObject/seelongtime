/**
 * Created by Administrator on 2015/6/15.
 */

var sectionList = [{s0: '饲料'}];
var groupList = [
    {
        s0: [
            {g0: '粉碎/筛理'},
            {g1: '配料/混合'},
            {g2: '制粒'},
            {g3: '膨化'},
            {g4: '烘干'},
            {g5: '输送'},
            {g6: '除尘'},
            {g7: '清理'},
            //{g8: '配料/混合'},
            //{g9: '膨化'},
            //{g10: '粉碎/筛理'},
            //{g11: '输送'},
            //{g12: '制粒'},
            {g8:'冷却稳定'},
            {g9: '预制件'}
        ]
    }
];
var manList = [
    {
        s0_g0: [
            {name: '赵波', department: '研究院', position: '主管', products: '粉碎、除尘、清理、筛分', series: '', tel: '18852715812'},
			{name: '熊华利', department: '工程技术中心', position: '主管', products: '粉碎、除尘、清理、筛分', series: '粉碎、除尘、清理、筛分', tel: '18852723736'},
            {name: '端存真', department: '工程技术中心', position: '工程师', products: '分级筛、单孔排料机、双孔排料机', series: '分级筛（SFJH系列、SXFQ75、SFJZ系列、）、单孔排料机（TDXX60×20）、双孔排料机（TSXX60×20）', tel: '18852723761'},
            {name: '李丹', department: '工程技术中心', position: '工程师', products: '圆筒初清筛、圆锥粉料初清筛、网带初清筛、永磁筒、预混料旋转分料器、分配器', series: '圆筒初清筛（TCQY系列单双层及双层双体）、圆锥粉料初清筛（SCQZ系列）、网带初清筛（TCQW150）、永磁筒（TCXT系列、TCXD系列）、预混料旋转分料器（TFLX系列）、分配器（TFPX系列）', tel: '18852723760'},
            {name: '王凯', department: '工程技术中心', position: '工程师', products: '粉碎机、除尘器', series: '全系列粉碎机、全系列除尘器', tel: '18852723752'},
            {name: '刘庆', department: '工程技术中心', position: '工程师', products: '粉碎机、喂料器', series: '全系列粉碎机、全系列喂料器', tel: '18852723751'}
		   ],
        s0_g1: [
            {name: '董飚', department: '研究院', position: '主管', products: '混合、喷涂、添加产品', series: 'SLHS系列，SJHS系列，YPLV系列,PTZL系列', tel: '60180'},
			{name: '姚正伟', department: '工程技术中心', position: '主管', products: '混合机、配料秤、液体添加、喷涂', series: '<strong>混合机</strong>SJHS系列、SLHS系列、SLHY系列、STHJ系列、SYHJ系列<br/><strong>配料秤</strong>PLDY系列、PLDF系列、ZNPF50<br/><strong>液体添加</strong>SSTZ系列、SSTZ系列、STTZ系列、SYTC系列、SSTC系列、SYPC系列、MSGL系列、MSBS系列、MSYG系列<br/><strong>喷涂</strong>YPLV系列、SYPZ系列', tel: '18852723780'},
            {name: '董勤武', department: '工程技术中心', position: '工程师', products: '混合机、配料秤', series: '<strong>混合机</strong>SJHS系列、SLHS系列、SLHY系列、STHJ系列、SYHJ系列<br /><strong>配料秤</strong>PLDY系列、PLDF系列、ZNPF50', tel: '18852723765'},
            {name: '裴冬永', department: '工程技术中心', position: '工程师', products: '液体添加、喷涂', series: '<strong>液体添加</strong>SSTZ系列、SSTZ系列、STTZ系列、SYTC系列、SSTC系列、SYPC系列、MSGL系列、MSBS系列、MSYG系列<br /><strong>喷涂</strong>YPLV系列、SYPZ系列', tel: '18852723770'},
            {name: '闫伟', department: '工程技术中心', position: '工程师', products: '液体添加、宠物料喷涂、配料秤', series: '<strong>液体添加</strong>SSTZ系列、SSTZ系列、STTZ系列、SYTC系列、SSTC系列、SYPC系列、MSGL系列、MSBS系列、MSYG系列<br /><strong>喷涂</strong>YPLV系列、SYPZ系列<br /><strong>配料秤</strong>PLDY系列、PLDF系列、ZNPF50', tel: '18852723767'},
            {name: '张明', department: '工程技术中心', position: '工程师', products: '液体添加、喷涂', series: '<strong>液体添加</strong>SSTZ系列、SSTZ系列、STTZ系列、SYTC系列、SSTC系列、SYPC系列、MSGL系列、MSBS系列、MSYG系列<br /><strong>喷涂</strong>YPLV系列、SYPZ系列', tel: '18852723763'}
 
	   ],
        s0_g2: [
            {name: '李庆凯', department: '研究院', position: '主管', products: '', series: '', tel: '18205276535'},
			{name: '周翔', department: '工程技术中心', position: '主管', products: '制粒机、调质器、碎粒机、喂料器', series: 'SZLH制粒机、全系列调质器（MUTZ/SBTZ/STZW/MZTZ/MYTZ）、MUSL碎粒机、MUWL喂料器', tel: '18852723805'},
            {name: '赵星星', department: '工程技术中心', position: '工程师', products: '制粒机、调质器、碎粒机、喂料器', series: 'SZLH制粒机、全系列调质器（MUTZ/SBTZ/STZW/MZTZ/MYTZ）、MUSL碎粒机、MUWL喂料器', tel: '18852723806'},
            {name: '贾根全', department: '工程技术中心', position: '工程师', products: '制粒机、调质器、碎粒机、喂料器', series: 'SZLH制粒机、全系列调质器（MUTZ/SBTZ/STZW/MZTZ/MYTZ）、MUSL碎粒机、MUWL喂料器', tel: '18852723811'},
            {name: '孔帅', department: '工程技术中心', position: '工程师', products: '制粒机、调质器、碎粒机、喂料器', series: 'SZLH制粒机、全系列调质器（MUTZ/SBTZ/STZW/MZTZ/MYTZ）、MUSL碎粒机、MUWL喂料器', tel: '18852723812'}
           
		],
        s0_g3: [
            {name: '马亮', department: '研究院', position: '主管', products: '膨化机技术', series: '全系列', tel: '13912130970'},
			{name: '张猛', department: '工程技术中心', position: '主管', products: '膨化相关产品', series: '全部系列', tel: '18852723781'},
            {name: '刘伟', department: '工程技术中心', position: '工程师', products: '膨化相关产品', series: '全部系列(侧重水产膨化）', tel: '18852723783'},
            {name: '刘礼洋', department: '工程技术中心', position: '工程师', products: '膨化相关产品', series: '全部系列(侧重水产膨化）', tel: '18852723785'},
            {name: '谢剑波', department: '工程技术中心', position: '工程师', products: '膨化相关产品', series: '全部系列(侧重原料膨化）', tel: '18852723782'},
            {name: '杨艳', department: '工程技术中心', position: '工程师', products: '膨化相关产品', series: '全部系列(侧重原料膨化）', tel: '18852723802'}
     
		],
        s0_g4: [
            {name: '张鹏飞', department: '研究院', position: '主管', products: '烘干机', series: 'SDZB系列（美瑞杰）、SDZB系列（中端）、试验机', tel: '18852715869'},
            {name: '张季伟', department: '研究院', position: '主管', products: '烘干机', series: 'SKGD系列、SKGW系列、SDZB系列（美瑞杰）、SDZB系列（中端）', tel: '15861388859'}
        ],
        s0_g5: [
            {name: '宋锐', department: '研究院', position: '主管', products: '提升机、刮板机、绞龙、闸阀门', series: 'TLSU系列、TLSG系列、TDTG系列、TGSS系列、MGSS系列、TZMQ系列、TZMD系列、TBDQ系列、TBDD系列、VZMQ系列、ZMQP系列、ZMDP系列', tel: '68236'},
			{name: '朱伟', department: '工程技术中心', position: '主管', products: '饲料板块输送设备', series: '饲料板块输送设备', tel: '18852723820'},
            {name: '车晨曦', department: '工程技术中心', position: '工程师', products: '绞龙', series: 'LSUW系列、LSUS系列、LSGW系列、LSGF系列螺旋输送机', tel: '18852723901'},
            {name: '李相源', department: '工程技术中心', position: '工程师', products: '刮板', series: 'TGSP系列、TGSU系列、TGSV系列、MGSS系列刮板机', tel: '18852723906'},
            {name: '宋正楼', department: '工程技术中心', position: '工程师', products: '闸阀门', series: 'ZMQP系列气动自清式闸门、ZMDP系列电动自清式闸门、TZMD系列电动闸门、TZMQ系列气动闸门、TZMS系列手动闸门、TZMQ系列滑删闸门、VZMQ系列V型闸门、TBDQ系列气动方形正三通、BDQC系列气动方形侧三通、BDQY系列气动圆形正三通、DQYC系列气动圆形侧三通、TBDD系列电动方形正三通、BDDC系列电动方形侧三通、SDFS手动蝶阀', tel: '18852723902'},
            {name: '吴夏', department: '工程技术中心', position: '工程师', products: '提升机', series: 'TDTG系列提升机', tel: '18852723907'},
            {name: '徐剑雄', department: '工程技术中心', position: '工程师', products: '刮板机', series: 'TGSP系列、TGSU系列、TGSV系列、MGSS系列刮板机', tel: '18852723911'},
            {name: '孙伟', department: '工程技术中心', position: '工程师', products: '提升机', series: 'TDTG系列提升机', tel: '18852723905'},
            {name: '殷蓉', department: '工程技术中心', position: '工程师', products: '闸阀门', series: 'ZMQP系列气动自清式闸门、ZMDP系列电动自清式闸门、TZMD系列电动闸门、TZMQ系列气动闸门、TZMS系列手动闸门、TZMQ系列滑删闸门、VZMQ系列V型闸门、TBDQ系列气动方形正三通、BDQC系列气动方形侧三通、BDQY系列气动圆形正三通、DQYC系列气动圆形侧三通、TBDD系列电动方形正三通、BDDC系列电动方形侧三通、SDFS手动蝶阀', tel: '18852723910'}
     
		],
        s0_g6: [
            {name: '高峰', department: '研究院', position: '主管', products: '', series: '', tel: '18852723912'}
        ],
        s0_g7: [
            {name: '李强', department: '研究院', position: '主管', products: '', series: '', tel: '13952755638'}
        ],
     
		s0_g8:[
			{name: '张慧', department: '工程技术中心', position: '工程师', products: '冷却器、稳定器、干燥机、关风器', series: 'SKLN/SLNF冷却器、SWLN冷却稳定组合机、SWDB稳定器、SKGL/SGWG干燥机、SGFY/SWLY关风器', tel: '18852723809'},
            {name: '袁文龙', department: '工程技术中心', position: '工程师', products: '冷却器、稳定器、干燥机、关风器', series: 'QDFM气动风门、WLXF喂料吸粉器、SSFL自动分料器', tel: '18852723807'}
      
		],
        s0_g9: [
            {name: '史小华', department: '工程技术中心', position: '主管', products: '气动风门、喂料吸粉器、自动分料器', series: 'QDFM气动风门、WLXF喂料吸粉器、SSFL自动分料器', tel: '18852715811'}
        ]
    }
];

$(function () {
    var $boxOptions1 = $('#box-options-1');
    var $boxOptions2 = $('#box-options-2');
    var $selectLine1 = $('#select-line-1');
    var $selectLine2 = $('#select-line-2');
    var $moduleGroupShow = $('#module-group-show');
    var $selectLineList = $('.select-line');


    $boxOptions1.append(createSectionList());
    $boxOptions2.append(createGroupList('s0'));

    $moduleGroupShow.append(createAllResult());
    bindEvent();

    function createAllResult() {
        var totalStr = '';
        totalStr = createResult('s0', 'g0')
                    + createResult('s0', 'g1')
                    + createResult('s0', 'g2')
                    + createResult('s0', 'g3')
                    + createResult('s0', 'g4')
                    + createResult('s0', 'g5')
                    + createResult('s0', 'g6')
                    + createResult('s0', 'g7')
                    + createResult('s0', 'g8')
                    + createResult('s0', 'g9');
                   // + createResult('s0', 'g10')
                   // + createResult('s0', 'g11')
                  //  + createResult('s0', 'g12')
                  //  + createResult('s0', 'g13');
        return totalStr;
    }

    function bindEvent() {
        $selectLineList.bind('click', function () {
            var temp = $(this);
            var href = temp.data('href');
            var status = temp.data('status');
            $boxOptions1.hide();
            $boxOptions2.hide();
            if (status === 'closed') {
                temp.data('status', 'opened');
                $('#' + href).show();
            } else if (status === 'opened') {
                temp.data('status', 'closed');
                $('#' + href).hide();
            }
            return false;
        });

        $('#box-options-1 span').bind('click', function (e) {
            var $temp = $(this);
            var id = $temp.data('id');
            var text = $temp.data('text');
            var i = id.slice(1);
            $temp.addClass('active').siblings().removeClass('active');
            $temp.closest('.box-options').hide().prev('.select-line').data('status', 'closed').data('id', id).find('span').html(text);
            $selectLine2.find('span').html(groupList[i][id][0].g0);
            $boxOptions2.html(createGroupList(id));
            $selectLine2.data('id', 'g0');
            bindBoxOptions2Event();
            getResult();
            e.stopPropagation();
        });

        bindBoxOptions2Event();
        bindBaseInfoEvent();
    }

    function bindBoxOptions2Event() {
        $('#box-options-2 span').bind('click', function (e) {
            var $temp = $(this);
            var id = $temp.data('id');
            var text = $temp.data('text');
            $temp.addClass('active').siblings().removeClass('active');
            $temp.closest('.box-options').hide().prev('.select-line').data('status', 'closed').data('id', id).find('span').html(text);
            getResult();
            e.stopPropagation();
        });
    }

    function bindBaseInfoEvent() {
        $('.base-info').bind('click', function (e) {
            var $temp = $(this);
            if ($temp.is('.opened')) {
                $temp.removeClass('opened').next('.more-info').hide();
            } else {
                $temp.addClass('opened').next('.more-info').show();
            }
            e.stopPropagation();
        });
    }

    function getResult() {
        var sid = $selectLine1.data('id');
        var gid = $selectLine2.data('id');
        $moduleGroupShow.html(createResult(sid, gid));
        bindBaseInfoEvent();
    }

    function createSectionList() {
        var htmlStr = '';
        var tempList = sectionList;
        for (var i = 0; i < tempList.length; i++) {
            htmlStr += '<span data-id="s'+ i +'" data-text="'+ tempList[i]['s' + i] +'">'+ tempList[i]['s' + i] +'</span>';
        }
        return htmlStr;
    }

    function createGroupList(sectionId) {
        var htmlStr = '';
        var tempList = groupList[0].s0;
        for (var i = 0; i < tempList.length; i++) {
            htmlStr += '<span data-id="g'+ i +'" data-text="'+ tempList[i]['g' + i] +'">'+ tempList[i]['g' + i] +'</span>';
        }
        return htmlStr;
    }

    function createResult(sectionId, groupId) {
        var htmlStr = '';
        var htmlArr;
        var dataList = manList[0][sectionId+'_'+groupId];
        var temp;
        if (typeof dataList === 'undefined') {
            //console.log('no data!');
            return;
        }
        for (var i = 0; i < dataList.length; i++) {
            temp = dataList[i];
            htmlArr = [];
            htmlArr.push('<div class="result-line">');
            htmlArr.push('<div class="base-info">');
            if (temp.series !== '' || temp.tel !== '') {
                htmlArr.push('<label class="arrow"></label>');
            }
            htmlArr.push('<div class="man-info">');
            if (temp.name !== '') {
                htmlArr.push('<span class="name">'+ temp.name +'</span>');
            }
            if (temp.department !== '') {
                htmlArr.push('<span class="department">'+ temp.department +'</span>');
            }
            if (temp.position !== '') {
                htmlArr.push('<span class="position">'+ temp.position +'</span>');
            }
            htmlArr.push('</div>');
            if (temp.products !== '') {
                htmlArr.push('<div class="product-info">'+ temp.products +'</div>');
            }
            htmlArr.push('</div>');
            if (temp.series !== '' || temp.tel !== '') {
                htmlArr.push('<div class="more-info" style="display: none;">');
                htmlArr.push('<label class="arrow"></label>');
                if (temp.series !== '') {
                    htmlArr.push('<div class="series">'+ temp.series +'</div>');
                }
                if (temp.tel !== '') {
                    htmlArr.push('<div class="tel">'+ temp.tel +'</div>');
                }
                htmlArr.push('</div>');
            }
            htmlArr.push('</div>');

            htmlStr += htmlArr.join('');
        }
        return htmlStr;
    }

});